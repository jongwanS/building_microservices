# 15 조직 구조

## 15.1 느슨하게 결합된 조직
## 15.2 콘웨이의 법칙
### 15.2.1 증거
## 15.3 팀 규모
## 15.4 콘웨이의 법칙 이해
## 15.5 소규모 팀, 대규모 조직
## 15.6 자율성에 관해
## 15.7 강력한 소유권 대 공동 소유권
### 15.7.1 강력한 소유권
### 15.7.2 공동 소유권
### 15.7.3 팀 수준 대 조직 수준
### 15.7.4 균형 모델

## 15.8 활성화 팀
- `활성화 팀`은 **스트림 정렬 팀을 지원**하기 위해 일하는 팀이다.
- [그림 15-2]처럼 횡당 면에서 여러 스트림 정렬 팀을 지원하기 위해 일하는 활성화 팀이 있다.  
  ![1](./images/ch15/img.png)      
  출처 : 한빛미디어 - 마이크로서비스 아키텍처 구축  
- `활성화 팀`은 **다양한 형태**와 **규모**로 구성될 수 있다.
- [그림 15-3] 이 예시이다.
  - 각 팀은 다른 프로그래밍 언어를 사용하기로 결정했다.
  ![1](./images/ch15/img_1.png)      
  출처 : 한빛미디어 - 마이크로서비스 아키텍처 구축  
- `활성화 팀`은 외부에서 더 잘 고칠 수 있는 문제를 식별하는 데 도움이 된다.

### 15.8.1 실천 공동체
- `실천 공동체(community of practice, COP)`는 **동료 간의 공유와 학습을 촉진하는 교차 그룹**이다.
  - 지속적으로 배우고 성장할 수 있는 조직을 만드는 멋진 방법이다.
- `CoP`랑 `활성화 팀`은 역할이 다르다.
  - `공통점`으로는, 조직 내 여러 팀에서 일어나는 일에 대한 통찰력을 제공한다.
  - `활성화 팀`은 다른 팀과 협력하고 돕기 위해 많은 시간 & 노력을 투자한다.
  - `실천 공동체`는 **동료간의 학습을 활성화하는 데 중점**을 둔다.
- `CoP`와 `활성화 팀`은 효과적으로 협업할 수 있다.
  - CoP는 활성화 팀에게 통찰력을 제공한다.

### 15.8.2 플랫폼
- 느슨하게 결합된 `스트림 정렬 팀`은 자체 테스트를 수행하고, 주간 배포를 관리하며, 필요 시 시스템 아키텍처를 변경한다.
  - `스트림 정렬 팀`에게는 **셀프 서비스 도구셋이 필요**하다.
  - **이를 제공하는 것**이 바로 `플랫폼`이다.
- **플랫폼이 없다면 조직 변화를 이루기 어렵다.**
- `플랫폼`은 **팀이 제품 기능에 집중할 수 있도록 능력을 제공**한다.

#### [플랫폼 팀]
- 플랫폼을 실행하고 관리하는 팀이 필요하다.
  - 이러한 기술 스택은 전문적인 기술이 필요하다.
- `플랫폼 팀`은 다른 개발자들을 사용자로 두고, 이들의 삶을 더 편하게 만드는 역할을 맡는다.
- `플랫폼 팀`은 플랫폼을 사용하는 **팀의 요구를 파악하고 협업**하여 **피드백과 요구 사항을 수용** 한다.
- `플랫폼 팀`의 일은 **기능을 쉽게 개발하고 출시하도록 만드는 것**이다. 
  - **플랫폼 구축은 그 중 하나** 이다. 
- `플랫폼 팀`은 활성화 팀처럼 **내부 컨설팅과 유사하게 운영**되어야 한다.
  - 다른 팀이 직면한 문제를 알아내고, 해결하도록 다른 팀과 협력해야 한다.

#### [포장된 길]
- `포장된 길(the paved road)`는 소프트웨어 개발에서 **작업을 쉽게 수행할 수 있도록** 하는 `명확한 방법`과 `메커니즘을` **제공하는 개념**이다 
- `포장된 길`의 핵심개념은 **강제하지 않는다**는 것이며, 단지 목적지에 도달하는 **더 쉬운 방법을 제공**할 뿐이다.
- `포장된 길`은 **정당한 경우 예외를 위한 여지를 남겨두는 것을 목표**로 한다.
- `자율적인 스트림 정렬 팀`으로 전환해도 **명확한 기술 비전**과 특정 작업에 대한 **명확한 지침은 필요**하다.
  - 플랫폼은 이러한 작업을 쉽게 수행하는 역할을 할 수 있다.
  - 플랫폼을 사용하면 포장된 길 위에 있는 것이다.
- 일부 조직은 플랫폼을 통해 통치하려고 할 수 있다.
  - 어떤 일을 해야 하고 왜 해야 하는지 설명하는 대신 `이 플랫폼을 사용해야 한다`라고만 이야기 한다.
  - 사용하기 어렵거나 특정 사례에 `적합하지 않은 플랫폼`은 **사람들이 해당 플랫폼을 우회하는 방법을 찾게 만든다.**


## 15.9 공유 마이크로서비스
- 필자는 **마이크로서비스에 대한 강력한 소유권 모델을 지지**한다.
- 일반적으로 하나의 마이크로서비스는 한팀에서 소유하지만, 여전히 마이크로서비스를 여러 팀에서 소유하는 경우가 많다.
- **마이크로서비스를 여러 팀이 공유하게 만드는 요인을 이해하는 것은 중요**하다.

### 15.9.1 너무 어려운 분할
- 둘 이상의 팀이 하나의 마이크로서비스를 소유하는 이유 
  - 마이크로서비스를 각 팀이 소유할 수 있도록 `분리비용`이 **높다.**
  - 조직에서 **분리의 가치를 제대로 파악하지 못하기 때문**이다. => 대규모 모놀리식 시스템에서 흔히 발생

### 15.9.2 횡단 변경 사항
- `횡단 변경 사항`은 팀 간 조정 필요성을 줄이기 위해 **가능한 한 최소화**해야 하지만, **일부 변경은 불가피**하다.

### 15.9.3 전달 병목 현상
- `팀 간 마이크로서비스 공유`는 **전달 병목 현상을 피하기 위해 도입**된다.
- 뮤직코프 예시
  - 두 팀(웹 사이트 및 모바일 팀 ) 모두 카탈로그 마이크로서비스 변경 필요.
- **해결책**
  - 기다리기
    - 각 팀이 다른 작업을 하며 카탈로그 서비스 변경을 기다린다.
  - 추가 인력 배치 
    - 카탈로그 팀에 사람을 추가해 작업을 더 빠르게 진행한다.
  - 마이크로 서비스 분리 
    - `카탈로그`를 `일반 음악 카탈로그`와 `벨소리 카탈로그`로 **분리**한다. => 시기상조 인지 판단해야 한다.
- 고려할 수 있는 다른 모델들
  - 다른 팀이 라이브러리를 통해 `코드 기여`
  - 공통 프레임워크에서 확장할 수 있도록 공유서비스를 `플러그인` 형태로 변경 

## 15.10 내부 오픈 소스
- 내부 오픈 소스 목적
  - `공유 코드베이스 문제 관리`
  - 팀 외부 사람들이 `마이크로서비스에 변경 사항을 쉽게 반영`하도록 도움
- 일반적인 오픈 소스와 유사하게, **핵심 커미터**는 `코드베이스를 담당`하며, `코드의 소유자`이다.
  - `커미터에게 요청`하거나 직접 변경 후 `pull 요청` => **내부 오픈 소스도 동일한 패턴이 잘 작동**

### 15.10.1 핵심 커미터의 역할
- `신뢰된 커미터(핵심 팀)`와 `비신뢰 커미터(팀 외부에서 변경 사항을 서브밋하는 사람들)`로 **구분**해야 한다.
- **핵심 소유권을 가진 팀**은 `변경 사항을 검토`하고 `승인하는 방법`이 필요하다.
  - 코드의 일관성, 품질 유지
- 게이트키퍼(gatekeeper)
  - 좋은 게이트키퍼 : 제출자와 명확한 의사소통, 좋은 행동 장려
  - 나쁜 게이트키퍼 : 권력 행사, 임의의 기술 결정으로 갈등 유발
  - 신뢰할 수 없는 커미터의 **변경 사항을 검토**하는 데 시간이 필요
  > **게이트키퍼(Gatekeeper)**
  > - 조직이나 프로젝트에서 특정 권한을 가지고 변경 사항이나 정보의 흐름을 통제하고 승인하는 역할을 담당하는 **사람** 또는 **팀**

### 15.10.2 성숙도
- 서비스가 `덜 안정적`이고 `덜 성숙`한 서비스는 **핵심 팀 외부에서의 패치 제출을 허용하기 어렵다.**
  - 대부분의 오픈 소스 프로젝트는 첫 번째 버전의 핵심 부분이 완료될 때까지 외부 기여를 받지 않음.
- **서비스가 성숙돼 변경이 거의 없다면** (예: 장바구니 서비스) `외부 기여를 허용할 시점`이다.

### 15.10.3 도구
- **내부 오픈 소스 모델을 잘 지원**하려면 `몇 가지 도구가 필요`하다.
  - pull 요청을 제출할 수 있는 기능이 포함된 **분산 버전 제어 도구 사용**
  - **패치 요청을 논의하고 발전시키는 도구** => 코드검토 시스템
- `커미터`가 **소프트웨어를 빌드하고 배포하는 과정을 쉽게 만들어야 한다.**
- **표준화된 기술 스택**은 다른 팀이 마이크로서비스를 수정하고 **패치를 제공하기 쉽게 한다.** 


## 15.11 플러그 가능한 모듈식 마이크로서비스
### 15.11.1 변경 사항 검토

## 15.12 고아 서비스
## 15.13 사례 연구:realestate.com.au
## 15.14 지리적 분포
## 15.15 콘웨이의 역법칙
## 15.16 사람

## 요약


![1](./images/ch15/img_1.png)      
출처 : 한빛미디어 - 마이크로서비스 아키텍처 구축  
