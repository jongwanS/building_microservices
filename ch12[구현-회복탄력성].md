# 12 회복탄력성
- 우리는 신뢰할 수 있는 소프트웨어를 만들어야 하는 임무가 있다.
  - 근무 시간동안만 소프트웨어를 지원해야 하는 시대는 저물었다.
- 전 세계 조직에서 `마이크로서비스 아키텍처`를 선택하는 데는 여러 이유가 있다.
  - 마이크로서비스 아키텍처가 **회복 탄력성**을 `향상시킬 것이라는 기대`가 주된 이유 이다.

## 12.1 회복 탄력성이란?
- **회복 탄력성(resiliency)의 네 가지 개념**
  - `견고성(robustness)`
    - 예상되는 변동을 **흡수하는 능력**
  - `회복성(rebound)`
    - 충격적인 사건 이후 **회복하는 능력**
  - `원만한 확장성(graceful extensiblity)`
    - 예상치 못한 상황에 **얼마나 잘 대처**하는가?
  - `지속적인 적응력(sustained adaptability)`
    - 변화하는 환경, 이해관계자, **요구 사항에 지속적으로 적응**하는 능력

### 12.1.1 견고성
- `견고성`은 **소프트웨어와 프로세스가 예상되는 문제를 수용할 수 있도록 메커니즘을 구축하는 개념**이다.
- 직면할지도 모를 **변동의 종류를 잘 이해**하고 이러한 **문제가 발생할 때 시스템이 잘 처리할 수 있도록 조치**를 취한다.
  - 호스트 고장 -> 교체 호스트 자동 가동
  - 네트워크 연결 시간 초과 -> 재시도 수행
- `견고성`은 사람에게도 적용될 수 있다.
  - 백업 담당자
- `견고성`은 **사전 지식이 필요**하다.
  - **알려진 변동을 위한 조치**를 취한다.
  - 예상하지 못한일이 발생 후 개선될 수 있다.
- 어플리케이션의 `견고성`을 높일수록 **많은 복잡성이 추가**되어 문제가 될 수 있다.
  - 비용/이점 분석 & 복잡한 시스템에 만족 여부 고려해야 한다.

### 12.1.2 회복성
- **시스템이 중단된 후 얼마나 잘 복구되는지**가 **회복 탄력성을 구축하는 핵심**이다.
- **시스템의 견고성을 개선**해 **예상되는 나쁜 상황에서 보호하려고 노력**해야 한다.
- **사전에 준비**하면 장애로부터 **회복하는 능력이 향상**된다.
  - 예를들어, 백업
- **회복 능력을 향상시키기 위해**서는 시스템 중단 후 실행할 수 있는 `플레이북`을 포함해야 한다.
  - 장애 발생 시, 개인들이 어떤 역할을 해야하는지, 누구와 소통해야 하는지 등등.. 

### 12.1.3 원만한 확장성
- `회복성`과 `견고성`은 주로 예상되는 문제를 다루고 있지만, **예측하지 못한 일이 발생할 수 있다.**
- 예측하지 **문제가 발생**했을때, **수평 조직은 더 잘 대처**할 수 있다.
- 시스템을 최적화하려는 과정에서 **시스템의 취약성이 증가**할 수 있다.
  - 예를들어, 자동화는 돌발 상황을 처리할 수 없다.

### 12.1.4 지속적인 적응력
- `지속적인 적응력`을 갖추려면 **안주하지 않아야 한다**
  - 과거의 성공이 미래의 성공을 보장하지 않는다.
- **미래의 회복 탄력성을 보장하기 위해** **지속적으로 적응하려는 노력**을 해야 한다.
  - **지속적인 적응력**을 구축시 **카오스 엔지니어링**은 유용한 도구이다.
- `지속적인 적응력`을 위해서는 **전체적인 관점이 필요**하다.
  - 소규모 자율적인 팀에 국부적 책임을 강화하면 큰 그림을 보지 못할 수 있다.
  - `전역 최적화`와 `지역 최적화` 사이의 균형을 조정해야 하며, 이는 고정되지 않는다(15장)//TODO
- 마이크로서비스의 소유권을 갖고 사용자 대면 기능을 제공하는 **스트림 정렬 팀의 역할이 중요**하다.(15장) //TODO
- 징계에 대한 두려움 없이 **자유롭게 정보를 공유하는 환경의 구축을 중시하는 문화**는 **장애로부터 학습을 장려하는 데 필수적**이다.
- `지속적인 적응력`을 위해서는 일회성이 아닌 **지속적인 투자가 필요하다.**
  - 이러한 지속적인 투자는 **문화의 핵심 부분**으로 만들어 준다.

//TODO
### 12.1.5 그리고 마이크로서비스 아키텍처
- `회복 탄력성을 제공하는 능력`은 소프트웨어가 아니라, **시스템을 구축하고 운영하는 사람들의 속성**이다.

## 12.2 장애는 어디에서나 발생한다.

## 12.3 얼마나 많아야 너무 많은 건가?
#### 응답시간/지연시간
#### 가용성
#### 데이터 내구성

## 12.4 기능 저하
## 12.5 안정성 패턴
### 12.5.1 타임아웃
### 12.5.2 재시도
### 12.5.3 벌크헤드
### 12.5.4 회로 차단기

//TODO
### 12.5.5 격리
### 12.5.6 이중화
### 12.5.7 미들웨어
### 12.5.8 멱등성

## 12.6 위험 분산










![1](./images/ch12/img_1.png)    
출처 : 한빛미디어 - 마이크로서비스 아키텍처 구축  